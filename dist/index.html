
<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/assets/logo-CPmPqqKk.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>منظومة الأرشفة الإلكترونية</title>
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Lateef&family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Reem+Kufi+Ink&family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- SQLite WASM Loader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <style>
      body {
        font-family: 'Tajawal', sans-serif;
        background-color: #f8fafc; /* Slate-50 */
        color: #1e293b; /* Slate-800 */
      }
      
      /* Typography Rules */
      h1, h2 {
        font-family: 'Amiri Quran', serif !important;
        line-height: 1.6;
      }
      
      .font-reem-ink {
        font-family: 'Reem Kufi Ink', sans-serif !important;
      }

      .font-naskh {
        font-family: 'Noto Naskh Arabic', serif !important;
      }

      .font-lateef {
        font-family: 'Lateef', serif !important;
      }

      /* Bootstrap-like Form Controls with Amber focus */
      input, select, textarea {
        border-radius: 0.375rem;
        border: 1px solid #cbd5e1; /* Slate-300 */
      }
      
      input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #d97706; /* Amber-600 */
        box-shadow: 0 0 0 0.2rem rgba(217, 119, 6, 0.2);
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9; 
      }
      ::-webkit-scrollbar-thumb {
        background: #94a3b8; 
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b; 
      }

      /* Save Indicator Animation */
      @keyframes pulse-ring {
        0% { transform: scale(0.8); opacity: 0.5; }
        100% { transform: scale(2); opacity: 0; }
      }

      /* Print Styles */
      @page {
        size: auto;
        margin: 0mm;
      }

      @media print {
        body { background: white; }
        body[data-print="invoice"] * { visibility: hidden; }
        body[data-print="invoice"] #invoice-modal, 
        body[data-print="invoice"] #invoice-modal * { visibility: visible; }
        body[data-print="invoice"] #invoice-modal { position: absolute; left: 0; top: 0; width: 100%; background: white; z-index: 9999; padding: 0; margin: 0; border: none !important; box-shadow: none !important; }
        body[data-print="file"] * { visibility: hidden; }
        body[data-print="file"] #invoice-modal, 
        body[data-print="file"] #invoice-modal * { visibility: visible; }
        body[data-print="file"] #invoice-modal { position: absolute; left: 0; top: 0; width: 100%; background: white; z-index: 9999; padding: 0; margin: 0; border: none !important; box-shadow: none !important; }
      }
    </style>

    <script src="https://cdn.tailwindcss.com"></script>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "recharts": "https://aistudiocdn.com/recharts@^3.4.1"
  }
}
</script>
    <script type="module" crossorigin src="/assets/index-BEG04fD6.js"></script>
  </head>
  <body>
    <div id="pwa-choice" style="position:fixed;inset:0;background:#0f172a;color:#e2e8f0;display:none;align-items:center;justify-content:center;z-index:9999">
      <div style="background:#111827;border:1px solid #1f2937;border-radius:12px;padding:24px;max-width:440px;width:90%;text-align:center">
        <div style="font-size:36px;color:#f59e0b;margin-bottom:8px"><i class="bi bi-app-indicator"></i></div>
        <h2 style="margin:0 0 8px 0">كيف تود المتابعة؟</h2>
        <p style="margin:0 0 16px 0;color:#94a3b8;font-size:14px">يمكن التثبيت كتطبيق أو المتابعة عبر المتصفح.</p>
        <div style="display:flex;gap:10px;justify-content:center">
          <button id="btn-install" style="padding:10px 16px;border-radius:8px;border:1px solid #374151;background:#1f2937;color:#f59e0b;font-weight:700">متابعة كتطبيق</button>
          <button id="btn-browser" style="padding:10px 16px;border-radius:8px;border:1px solid #374151;background:#1f2937;color:#e2e8f0;font-weight:700">متابعة بالمستعرض</button>
        </div>
      </div>
    </div>
    <div id="root"></div>
    <script>
      var deferredPrompt = null
      var choiceShown = false
      function showChoice(){
        if (choiceShown) return
        var el = document.getElementById('pwa-choice')
        if (!el) return
        el.style.display = 'flex'
        choiceShown = true
      }
      window.addEventListener('beforeinstallprompt', function(e){
        e.preventDefault()
        deferredPrompt = e
        showChoice()
      })
      document.getElementById('btn-browser')?.addEventListener('click', function(){
        var el = document.getElementById('pwa-choice')
        if (el) el.style.display = 'none'
      })
      document.getElementById('btn-install')?.addEventListener('click', async function(){
        if (!deferredPrompt) return
        var el = document.getElementById('pwa-choice')
        const r = await deferredPrompt.prompt()
        if (el) el.style.display = 'none'
        deferredPrompt = null
      })
      if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
        var el = document.getElementById('pwa-choice')
        if (el) el.style.display = 'none'
      }
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function(){
          navigator.serviceWorker.register('/sw.js')
        })
      }
    </script>
  </body>
</html>
